Metadata-Version: 2.4
Name: battle2
Version: 0.1.0
Summary: BATTLE2: Core Wars–inspired battle engine, agent designer, and replay viewer.
Author: Rod Satterfield
License: Copyright (c) 2025 Rod Satterfield
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.
        ...
        
Project-URL: Homepage, https://github.com/libertaine/BATTLE2
Project-URL: Issues, https://github.com/libertaine/BATTLE2/issues
Keywords: corewar,pmars,ai-agents,pygame,simulation
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: click>=8.1
Provides-Extra: gui
Requires-Dist: pygame>=2.5; extra == "gui"
Provides-Extra: dev
Requires-Dist: ruff>=0.6; extra == "dev"
Requires-Dist: mypy>=1.10; extra == "dev"
Requires-Dist: pytest>=8; extra == "dev"
Provides-Extra: windows-build
Requires-Dist: pyinstaller>=6.6; extra == "windows-build"
Requires-Dist: pefile>=2023.2.7; extra == "windows-build"
Dynamic: license-file


Project to determine feasibility of using LLM to assist me in creation of a project.


````markdown
# BATTLE2

**BATTLE2** is a Python-based framework and simulation engine for Core War–style AI competitions. It supports:

- Native Python agents  
- Precompiled binary “blob” agents  
- Integration with pMARS (Redcode) for interop  
- Replay viewing and agent design tools  

This project is released under the **MIT License**. See the [LICENSE](LICENSE) file for details.

---

## 🔧 Quick Start

### Clone & Install (dev mode)

```bash
git clone https://github.com/libertaine/BATTLE2.git
cd BATTLE2
python -m venv venv
source venv/bin/activate     # or `.\venv\Scripts\activate` on Windows
pip install -e .[gui]        # gui extra includes pygame
````

> If you don’t need GUI tools, you can install just the core with:
>
> ```bash
> pip install -e .
> ```

### CLI Usage

```bash
battle-cli --help
```

Key options:

* `--ticks N`: number of simulation cycles
* `--arena SIZE`: memory arena size
* `--list-agents`: show available agents
* `--mode redcode94`: engage pMARS mode (requires `--red-a` and `--red-b`)
* Other flags control agent selection, instruction quotas, weighting, etc.

You can also run:

```bash
python -m battle_engine.cli --help
```

---

## 🧠 Agent Formats & Execution Modes

### Supported Agent Formats

| Type    | File         | Execution Path            | Notes                                    |
| ------- | ------------ | ------------------------- | ---------------------------------------- |
| Python  | `agent.py`   | Interpreted at runtime    | Use Python logic & host APIs             |
| Blob    | `model.blob` | Loaded directly by engine | Faster, minimal runtime                  |
| Redcode | `.red/.asm`  | Via pMARS integration     | Compatible with existing Core War agents |

* The **Python** format is great for experimentation and rapid prototyping.
* Use **blob** when you want to ship just the low-level compiled version.
* The **Redcode** mode allows interop with legacy Core War agents (via pMARS). Use `--mode redcode94`.

### Agent Discovery Structure

Under the `agents/` directory:

```
agents/
  my_agent/
    agent.yaml
    agent.py
    model.blob  # optional
  ...
```

The `agent.yaml` defines metadata (name, display name, required blobs, dependencies). If `model.blob` exists, it will be preferred in binary execution.

Use:

```bash
battle-cli --list-agents
```

to see all discovered agents.

---

## 🎮 GUI Tools (optional)

### Tools

| Executable | Role | Tech |
|-----------|------|------|
| battle-agent-designer.exe | Configure & run matches, open replays | PySide6 (Qt) |
| match_runner.exe          | Live match visualizer (grid/ticks)     | Pygame |



---

## ⚙ Integration with pMARS (Redcode mode)

BATTLE2 supports pMARS (Redcode) for interoperability:

```bash
battle-cli --mode redcode94 --red-a path/to/A.red --red-b path/to/B.red --ticks 800
```

* The backend spawns `pmars` with appropriate flags to evaluate the match.
* The output includes a `summary.json` indicating winner, return code, and parameters.
* You need to install `pmars` binaries (bundled or via your system). The license of pMARS must be respected (typically GPLv2). See `third_party_licenses/` in this repo for full details.

---

## 🧪 First-Run Example

1. Clone & install (see **Quick Start** above).

2. View available agents:

   ```bash
   battle-cli --list-agents
   ```

3. Run a match with default agents:

   ```bash
   battle-cli --ticks 500 --arena 2048 --a-agent my_agent --b-agent other_agent
   ```

4. Optional: launch viewer to inspect results:

   ```bash
   battle-replay-viewer path/to/replay.json
   ```

---

## 🚀 Packaging for Windows

We use a wrapper entry point (`battle_engine._entry:main`) to surface `battle-cli` without modifying `cli.py` directly.
For Windows packaging, two approaches are viable:

* **PyInstaller + Inno Setup**

  * Build executables for `battle-cli`, `battle-agent-designer`, and `replay-viewer`
  * Use Inno Setup script (`.iss`) to bundle binaries, agents folder, pmars, etc.
  * Add Start Menu shortcuts, add to PATH optionally

* **MSI via WiX Toolset**

  * More control (repair, feature sets), suitable for enterprise use
  * You can author features/components for `bin/`, `agents/`, `pmars/`

In both cases, rely on the `console_scripts` wrappers and package metadata from `pyproject.toml`.

---

## 🧷 Developer Notes & Contribution

* The project uses a **multi-root source layout**:

  * `engine/src/` (battle engine core)
  * `client/src/` (GUI / client tooling)

* Packaging via `pyproject.toml` uses `tool.setuptools.packages.find` to detect both roots.

* Keep asset/dataset files in package directories (e.g. `warriors/`, `data/`) so they get included in installs.

* CI (GitHub Actions) should at least run `battle-cli --help`, build tests, and optionally GUI smoke tests.

If you are migrating from the prior version, check the following:

* Your old agent files must be relocated under `agents/` with a matching directory structure
* `.env` has been removed; use environment variables or CLI options instead
* The wrapper ensures existing CLI logic carries forward unchanged

Contributions welcome — open a PR or issue. Thanks for checking out BATTLE2!

```

Role: senior Python engineer. Target: Python 3.11 (Win/Linux). Keep changes minimal.

Implement <FUNCTION_NAME> per the spec in <SPEC_PATH>.
Constraints:
- Deterministic behavior
- Clear, typed exceptions
- Unit tests in tests/test_<MODULE>.py (pytest)
- No new dependencies

Repo context:
- Engine CLI: python -m battle_engine.cli
- GUI entry: app/main.py

SPEC:
<<paste contents of docs/specs/<FUNCTION_NAME>.md>>
